use half_earth_engine::surface::{oil_paint_effect,compute_intensities};
use criterion::{black_box, criterion_group, criterion_main, Criterion};

fn criterion_benchmark(c: &mut Criterion) {
    let (width, height) = (40, 20);
    let img: Vec<u8> = vec![21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,57,166,100,234,171,68,234,171,68,21,120,194,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,201,225,244,21,120,194,21,120,194,21,120,194,57,166,100,78,84,32,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,57,166,100,21,120,194,57,166,100,178,130,44,239,191,57,239,191,57,178,130,44,57,166,100,57,166,100,57,166,100,57,166,100,57,166,100,201,225,244,21,120,194,201,225,244,201,225,244,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,180,92,239,191,57,178,130,44,178,130,44,178,130,44,178,130,44,178,130,44,57,166,100,178,130,44,239,191,57,178,130,44,239,191,57,178,130,44,57,166,100,239,191,57,178,130,44,178,130,44,57,166,100,21,120,194,21,120,194,239,191,57,21,120,194,21,120,194,57,166,100,55,180,92,55,180,92,239,191,57,178,130,44,21,120,194,178,130,44,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,239,191,57,21,120,194,23,112,57,55,180,92,10,120,70,23,112,57,239,191,57,23,112,57,23,112,57,55,180,92,23,112,57,23,112,57,23,112,57,55,180,92,23,112,57,57,166,100,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,27,100,6,200,247,142,200,247,142,55,180,92,55,180,92,23,112,57,23,112,57,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,200,247,142,57,166,100,23,112,57,55,180,92,200,247,142,57,166,100,57,166,100,57,166,100,57,166,100,23,112,57,27,114,24,57,166,100,57,166,100,10,120,70,239,191,57,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,180,92,57,166,100,57,166,100,219,225,120,200,247,142,200,247,142,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,57,166,100,21,120,194,21,120,194,200,247,142,57,166,100,57,166,100,178,130,44,234,171,68,57,166,100,57,166,100,234,171,68,234,171,68,234,171,68,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,178,130,44,178,130,44,55,172,81,55,180,92,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,234,171,68,234,171,68,234,171,68,234,171,68,21,120,194,234,171,68,234,171,68,234,171,68,234,171,68,239,191,57,57,166,100,57,166,100,57,166,100,219,225,120,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,234,171,68,234,171,68,234,171,68,234,171,68,234,171,68,234,171,68,234,171,68,234,171,68,234,171,68,21,120,194,57,166,100,23,112,57,23,112,57,55,172,81,55,172,81,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,180,92,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,57,166,100,57,166,100,57,166,100,200,247,142,57,166,100,57,166,100,234,171,68,21,120,194,21,120,194,21,120,194,200,247,142,21,120,194,21,120,194,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,172,81,55,172,81,55,172,81,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,172,81,55,172,81,239,191,57,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,172,81,55,172,81,55,172,81,21,120,194,239,191,57,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,239,191,57,55,172,81,239,191,57,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,172,81,21,120,194,55,172,81,21,120,194,55,172,81,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,172,81,200,247,142,239,191,57,239,191,57,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,57,166,100,57,166,100,239,191,57,21,120,194,55,172,81,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,234,171,68,55,180,92,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,178,130,44,239,191,57,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,178,130,44,178,130,44,178,130,44,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,57,166,100,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,178,130,44,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,239,191,57,178,130,44,178,130,44,57,166,100,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,178,130,44,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,55,172,81,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,201,225,244,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,201,225,244,201,225,244,21,120,194,21,120,194,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,21,120,194,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,21,120,194,21,120,194,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244,201,225,244];
    let intensities = compute_intensities(&img);
    c.bench_function("oil_paint_effect", |b| b.iter(|| {
        let mut pixels: Vec<u8> = vec![0; img.len()];
        oil_paint_effect(&mut pixels, &intensities, black_box(width), black_box(height));
    }));
}

criterion_group!(benches, criterion_benchmark);
criterion_main!(benches);